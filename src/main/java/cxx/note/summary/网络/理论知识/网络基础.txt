
Tcp/Ip协议由应用层、传输层、网络层、数据链路层和物理层组成，每一层都依赖于下一层，每一层都运行着不同的协议，共同组成互联网协议。

交换机负责组建局域网，研究的是 MAC 地址，而路由器是负责组建广域网，研究的是 IP 地址

1、物理层：主要是由网线、无线电波等物理设施组成，主要负责底层的电信号传输。
2、数据链路层：数据链路层主要负责数据包的校验，将网络层的数据封装成帧，交给物理层进行传输
对应着以太网协议，以太网协议规定：一组电信号构成一个数据包，叫帧，每一帧分为报头( head )和数据( data ) 两部分
报头(head)：固定 18 个字节
发送者/源地址： 6 个字节
接收者/目标地址： 6 个字节
数据类型： 6 个字节 数据( data ):最短 46 个字节，最长 1500 字节 数据包的具体内容(发送给女朋友的话/快递货物)
ARP 就是通过 IP 地址来查找 MAC 地址的一套固定协议，它是数据链路层的内容
以太网协议中的地址叫 MAC 地址， MAC 地址是每台计算机唯一的物理地址，是被写在网卡上的
(注：数据链路层只能在局域网内通信，通信的方式是广播)
3、网络层：定义了子网，区分各个局域网，负责局域网间的通信，对应ip协议，ip协议规定了网络地址。
ip地址：由32位二进制数来表示，分为两部分，分别是网络位(前24位)和主机位(后8位)
子网掩码：和ip地址结构一样，用来计算源ip和目标ip是否在同一个子网内。
IP协议使用IP数据包进行发送数据，IP数据包同样把数据分为了两部分，head和data，在发送数据的时候，IP数据包直接装载为以太网的data部分。
head:长度为 20 到 600 字节、data:最长为 65515 字节
4、传输层：传输层定义了端口的概念，可以用来区分不同的应用程序。
端口：应用程序和网卡的关联编号
所以传输层的作用是建立了端口到端口间的通信。
传输层有两种协议： TCP 和 UDP
可靠传输，TCP 数据包没有长度限制，理论上可以无限长，但是为了保证网络的效率，通常TCP数据包的长度不会超过IP数据包的长度，以确保单个TCP数据包不必再分割。
TCP 头放的主要是源端口和目标端口
UDP 协议：不可靠传输，“报头”部分一共只有8个字节，总长度不超过65535字节，正好放进一个IP数据包。

总而言之，数据链路层建立了局域网内的链接，网络层建立了局域网间的链接，而传输层定义了端口，建立了端口到端口间的链接


------------------------------------------------------------------------------------------------------------------------

Socket

Socket是应用层与TCP/IP协议族通信的一个中间(软件)抽象层,是一组接口。在设计模式中，Socket其实就是一个门面模式，它把复杂的TCP/IP协议族隐藏
在Socket接口后面，对用户来说，一组简单的接口就是全部，让Socket去组织数据，以符合指定的协议。
个人理解是socket是操作系统将tcp/ip协议族封装起来供用户使用的一个中间接口，提供给用户程序或者说用户层去使用。

当客户端调用connect时，触发了连接请求，向服务器发送了SYN J包，这时connect进入阻塞状态；服务器监听到连接请求，即收到SYN J包，调用accept函
数接收请求向客户端发送SYN K ，ACK J+1，这时accept进入阻塞状态；客户端收到服务器的SYN K ，ACK J+1之后，这时connect返回，并对SYN K进行
确认；服务器收到ACK K+1时，accept返回，至此三次握手完毕，连接建立。